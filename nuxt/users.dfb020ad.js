import{_ as F,a as R}from"./Modal.b73f5a06.js";import{_ as z}from"./Datatable.vue.ca3ea79b.js";import{_ as A}from"./Spinner.d3bd0c23.js";import{u as E}from"./usersStore.4a07e61e.js";import{n as V,r as v,o as n,c as r,b as g,w as j,a as e,u as c,q as G,F as T,s as I,t as i,v as H,x as J,y as x,d as u,z as w,$ as U,a0 as K,a1 as Q,a2 as W,A as X,P as Y}from"./entry.8274f21e.js";import"./FirestoreService.ba9c0b5d.js";const Z={class:"modal-content text-left"},ee={class:"flex p-4 bg-blue-400 text-white justify-between pb-3"},te=e("h3",{class:"text-xl"},[e("i",{class:"fa-solid fa-circle-plus"}),u(" Ajouter un utilisateur")],-1),se=e("i",{class:"fa-solid fa-xmark"},null,-1),oe=[se],le={key:0,class:"flex bg-white h-64 w-full justify-center items-center"},ne={key:1},ae=["onSubmit"],ie={style:{height:"80vh"},class:"modal-body pb-16 p-5 overflow-y-auto"},re={key:0,class:"bg-red-200 border-l-4 border-red-500 p-4 mb-4"},de={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ue={class:"mb-4"},ce=e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"username"},"Pseudo :",-1),me={class:"mb-4"},pe=e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"last_name"},"Nom :",-1),_e={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},fe={class:"mb-4"},be=e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"first_name"},"Prénom :",-1),he={class:"mb-4"},ge=e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"middle_name"},"Deuxième prénom :",-1),ye={class:"mb-4"},ve=e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"email"},"Email :",-1),$e={class:"mb-4"},xe=e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"phone_number"},"Numéro de téléphone :",-1),we={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ke={class:"mb-4"},De=e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"password"},"Mot de passe :",-1),Ce={class:"mb-4"},Se=e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"password"},"Mot de passe :",-1),Oe={class:"absolute bg-gray-100 w-full flex justify-end bottom-0 p-4"},Ne=e("button",{type:"submit",class:"btn-primary text-white py-2 px-4 rounded-sm"}," Enregistrer ",-1),Me=V({__name:"AddUserModal",props:{isOpen:{type:Boolean,required:!0,default:!1}},emits:["onClose","onSuccess"],setup(D,{emit:t}){const _=E(),b=v(!1),l={username:"",first_name:"",last_name:"",middle_name:null,email:"",phone_number:null,password:"",password2:""},p=async()=>{b.value=!0,await _.postData(l).then(a=>{a&&(console.log("=============data======================="),console.log(a),console.log("===================================="),t("onClose"),t("onSuccess","Utilisateur ajouté avec succès")),b.value=!1})};return(a,o)=>{const $=A,f=F;return n(),r("div",null,[g(f,{"is-open":D.isOpen},{default:j(()=>[e("div",Z,[e("div",ee,[te,e("button",{onClick:o[0]||(o[0]=s=>a.$emit("onClose")),class:"modal-close"},oe)]),c(b)?(n(),r("div",le,[g($,{class:"h-12"})])):(n(),r("div",ne,[e("form",{onSubmit:G(p,["prevent"])},[e("div",ie,[c(_).errors&&c(_).errors.length!=0?(n(),r("div",re,[(n(!0),r(T,null,I(c(_).errors,(s,h)=>(n(),r("p",{key:h,class:"font-semibold my-1"},i(("getFieldFromPointer"in a?a.getFieldFromPointer:c(H))(s.source.pointer))+" : "+i(s.detail),1))),128))])):J("",!0),e("div",de,[e("div",ue,[ce,x(e("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>l.username=s),class:"border rounded-md py-2 px-3 w-full",type:"text",id:"username",name:"username",placeholder:"Nom d'utilisateur",required:""},null,512),[[w,l.username]])]),e("div",me,[pe,x(e("input",{"onUpdate:modelValue":o[2]||(o[2]=s=>l.last_name=s),class:"border rounded-md py-2 px-3 w-full",type:"text",id:"last_name",name:"last_name",placeholder:"Nom de famille",required:""},null,512),[[w,l.last_name]])])]),e("div",_e,[e("div",fe,[be,x(e("input",{"onUpdate:modelValue":o[3]||(o[3]=s=>l.first_name=s),class:"border rounded-md py-2 px-3 w-full",type:"text",id:"first_name",name:"first_name",placeholder:"Prénom",required:""},null,512),[[w,l.first_name]])]),e("div",he,[ge,x(e("input",{"onUpdate:modelValue":o[4]||(o[4]=s=>l.middle_name=s),class:"border rounded-md py-2 px-3 w-full",type:"text",id:"middle_name",name:"middle_name",placeholder:"Deuxième prénom"},null,512),[[w,l.middle_name]])])]),e("div",ye,[ve,x(e("input",{"onUpdate:modelValue":o[5]||(o[5]=s=>l.email=s),class:"border rounded-md py-2 px-3 w-full",type:"email",id:"email",name:"email",placeholder:"Email",required:""},null,512),[[w,l.email]])]),e("div",$e,[xe,x(e("input",{"onUpdate:modelValue":o[6]||(o[6]=s=>l.phone_number=s),class:"border rounded-md py-2 px-3 w-full",type:"tel",id:"phone_number",name:"phone_number",placeholder:"Numéro de téléphone"},null,512),[[w,l.phone_number]])]),e("div",we,[e("div",ke,[De,x(e("input",{"onUpdate:modelValue":o[7]||(o[7]=s=>l.password=s),class:"border rounded-md py-2 px-3 w-full",type:"password",id:"password",name:"password",placeholder:"Mot de passe",required:""},null,512),[[w,l.password]])]),e("div",Ce,[Se,x(e("input",{"onUpdate:modelValue":o[8]||(o[8]=s=>l.password2=s),class:"border rounded-md py-2 px-3 w-full",type:"password",id:"password2",name:"password2",placeholder:"Confirmer Mot de passe",required:""},null,512),[[w,l.password2]])])])]),e("div",Oe,[e("button",{class:"bg-gray-200 text-black py-2 px-4 rounded-sm mr-2",onClick:o[9]||(o[9]=s=>a.$emit("onClose"))}," Fermer "),Ne])],40,ae)]))])]),_:1},8,["is-open"])])}}}),Ue={class:"modal-content text-left"},Ve={class:"flex p-4 bg-yellow-500 text-white justify-between pb-3"},je=e("h3",{class:"text-xl"},[e("i",{class:"fa-regular fa-eye"}),u(" Voir un utilistaeur")],-1),Fe=e("i",{class:"fa-solid fa-xmark"},null,-1),Ae=[Fe],Ee={style:{height:"80vh"},class:"modal-body pb-16 p-5 overflow-y-auto"},qe=e("strong",null,"ID:",-1),Pe=e("strong",null,"Nom d'utilisateur:",-1),Be=e("strong",null,"Prénom:",-1),Te=e("strong",null,"Nom de famille:",-1),Ie=e("strong",null,"Nom complet:",-1),Le=e("strong",null,"Email:",-1),Re=e("strong",null,"Téléphone:",-1),ze=e("strong",null,"CNI:",-1),Ge=e("strong",null,"Passeport:",-1),He=e("strong",null,"Dernière connexion:",-1),Je=e("strong",null,"Est agent: ",-1),Ke={key:0,class:"fa fa-check-circle fa-2x text-green-500","aria-hidden":"true"},Qe={key:1,class:"fa fa-xmark-circle fa-lg text-red-500","aria-hidden":"true"},We=e("strong",null,"Est personnel: ",-1),Xe={key:0,class:"fa fa-check-circle fa-2x text-green-500","aria-hidden":"true"},Ye={key:1,class:"fa fa-xmark-circle fa-lg text-red-500","aria-hidden":"true"},Ze=e("strong",null,"Est super utilisateur:",-1),et={key:0,class:"fa fa-check-circle fa-2x text-green-500","aria-hidden":"true"},tt={key:1,class:"fa fa-xmark-circle fa-lg text-red-500","aria-hidden":"true"},st=e("strong",null,"Statut:",-1),ot=e("strong",null,"Évaluation:",-1),lt=e("strong",null,"Commentaires:",-1),nt=e("strong",null,"Date de création:",-1),at=e("strong",null,"Date de modification:",-1),it=e("strong",null,"Date d'activation:",-1),rt=e("strong",null,"Date de désactivation:",-1),dt={class:"absolute bg-gray-100 w-full flex justify-end bottom-0 p-4"},ut=V({__name:"ViewUserModal",props:{isOpen:{type:Boolean},selectedData:{}},setup(D){return(t,_)=>{const b=F;return n(),r("div",null,[g(b,{"is-open":t.isOpen},{default:j(()=>{var l,p,a,o,$,f,s,h,k,y,d,C,S,O,m,N,M,q,P,B;return[e("div",Ue,[e("div",Ve,[je,e("button",{onClick:_[0]||(_[0]=L=>t.$emit("onClose")),class:"modal-close"},Ae)]),e("div",Ee,[e("li",null,[qe,u(" "+i((l=t.selectedData)==null?void 0:l.id),1)]),e("li",null,[Pe,u(" "+i((p=t.selectedData)==null?void 0:p.attributes.username),1)]),e("li",null,[Be,u(" "+i((a=t.selectedData)==null?void 0:a.attributes.first_name),1)]),e("li",null,[Te,u(" "+i((o=t.selectedData)==null?void 0:o.attributes.last_name),1)]),e("li",null,[Ie,u(" "+i(($=t.selectedData)==null?void 0:$.attributes.full_name),1)]),e("li",null,[Le,u(" "+i((f=t.selectedData)==null?void 0:f.attributes.email),1)]),e("li",null,[Re,u(" "+i((s=t.selectedData)==null?void 0:s.attributes.phone_number),1)]),e("li",null,[ze,u(" "+i((h=t.selectedData)==null?void 0:h.attributes.cni),1)]),e("li",null,[Ge,u(" "+i((k=t.selectedData)==null?void 0:k.attributes.passport),1)]),e("li",null,[He,u(" "+i((y=t.selectedData)==null?void 0:y.attributes.last_login),1)]),e("li",null,[Je,((d=t.selectedData)==null?void 0:d.attributes.is_agent)==!0?(n(),r("i",Ke)):(n(),r("i",Qe))]),e("li",null,[We,((C=t.selectedData)==null?void 0:C.attributes.is_staff)==!0?(n(),r("i",Xe)):(n(),r("i",Ye))]),e("li",null,[Ze,((S=t.selectedData)==null?void 0:S.attributes.is_superuser)==!0?(n(),r("i",et)):(n(),r("i",tt))]),e("li",null,[st,u(" "+i((O=t.selectedData)==null?void 0:O.attributes.status),1)]),e("li",null,[ot,u(" "+i((m=t.selectedData)==null?void 0:m.attributes.rating),1)]),e("li",null,[lt,u(" "+i((N=t.selectedData)==null?void 0:N.attributes.reviews),1)]),e("li",null,[nt,u(" "+i(("frenchDate"in t?t.frenchDate:c(U))(((M=t.selectedData)==null?void 0:M.attributes.created)??"")),1)]),e("li",null,[at,u(" "+i(("frenchDate"in t?t.frenchDate:c(U))(((q=t.selectedData)==null?void 0:q.attributes.modified)??"")),1)]),e("li",null,[it,u(" "+i(("frenchDate"in t?t.frenchDate:c(U))(((P=t.selectedData)==null?void 0:P.attributes.activate_date)??"")),1)]),e("li",null,[rt,u(" "+i(("frenchDate"in t?t.frenchDate:c(U))(((B=t.selectedData)==null?void 0:B.attributes.deactivate_date)??"")),1)])]),e("div",dt,[e("button",{class:"bg-gray-200 text-black py-1 px-4 rounded-sm mr-2",onClick:_[1]||(_[1]=L=>t.$emit("onClose"))}," Fermer ")])])]}),_:1},8,["is-open"])])}}}),ct={class:"modal-content text-left h-56"},mt={class:"flex p-4 bg-red-500 text-white justify-between pb-3"},pt=e("h3",{class:"text-xl"},"Confirmer la suppression",-1),_t=e("i",{class:"fa-solid fa-xmark"},null,-1),ft=[_t],bt={key:0,class:"flex bg-white h-full w-full justify-center items-center"},ht={key:1},gt={class:"modal-body p-5"},yt={class:"absolute bg-gray-100 w-full flex justify-end bottom-0 p-4"},vt=V({__name:"DeleteUserModal",props:{isOpen:{type:Boolean},selectedData:{}},emits:["onClose","onSuccess"],setup(D,{emit:t}){const _=v(!1),b=E(),l=async p=>{_.value=!0,b.deleteData(p).then(()=>{_.value=!1,t("onClose"),t("onSuccess","Utilisateur supprimé avec succès")})};return(p,a)=>{const o=A,$=F;return n(),r("div",null,[g($,{"is-open":p.isOpen},{default:j(()=>{var f,s;return[e("div",ct,[e("div",mt,[pt,e("button",{onClick:a[0]||(a[0]=h=>p.$emit("onClose")),class:"modal-close"},ft)]),c(_)?(n(),r("div",bt,[g(o,{class:"h-12"})])):(n(),r("div",ht,[e("div",gt,[e("p",null,i(`Supprimer ${(f=p.selectedData)==null?void 0:f.attributes.last_name} ${(s=p.selectedData)==null?void 0:s.attributes.first_name} ?`),1)]),e("div",yt,[e("button",{class:"bg-gray-200 text-black py-1 px-4 rounded-sm mr-2",onClick:a[1]||(a[1]=h=>p.$emit("onClose"))}," Fermer "),e("button",{onClick:a[2]||(a[2]=h=>{var k;return l(((k=p.selectedData)==null?void 0:k.id)??"")}),class:"btn-primary text-white py-1 px-4 rounded-sm"}," Supprimer ")])]))])]}),_:1},8,["is-open"])])}}}),$t=e("i",{class:"fa-solid fa-circle-plus"},null,-1),xt={class:"p-5 bg-white w-full h-full shadow-2xl rounded-lg bg-opacity-25"},wt=e("thead",null,[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-sm font-bold"},"Nom"),e("th",{class:"px-6 py-3 text-left text-sm font-bold"},"Email"),e("th",{class:"px-6 py-3 text-left text-sm font-bold"},"Agent"),e("th",{class:"px-6 py-3 text-left text-sm font-bold"},"Actions")])],-1),kt={class:"bg-white text-gray-600 divide-y divide-gray-200"},Dt={class:"px-6 py-4 whitespace-no-wrap"},Ct={class:"px-6 py-4 whitespace-no-wrap"},St={class:"px-6 py-4 whitespace-no-wrap"},Ot={key:0,class:"fa fa-check-circle fa-2x text-green-500","aria-hidden":"true"},Nt={key:1,class:"fa fa-xmark-circle fa-2x text-red-500","aria-hidden":"true"},Mt={class:"flex gap-2"},Ut=["onClick"],Vt=e("i",{class:"fa-regular fa-eye"},null,-1),jt=[Vt],Ft=e("i",{class:"fa-regular fa-pen-to-square"},null,-1),At=[Ft],Et=["onClick"],qt=e("i",{class:"fa-regular fa-trash-can"},null,-1),Pt=[qt],Bt={key:1,class:"flex flex-col justify-center items-center"},Tt=e("p",{class:"m-2"},"Chargement en cours...",-1),Jt=V({__name:"users",async setup(D){let t,_;const b=E(),l=v(),p=v(!1),a=v(!1),o=v(!1),$=v(!1),f=v(!1),s=v(""),h=(y,d)=>{switch(l.value=y,d){case"read":a.value=!0;break;case"edit":$.value=!0;break;case"delete":o.value=!0;break}console.log("===================================="),console.log(a.value),console.log("====================================")},{$db:k}=Y();try{const y=([t,_]=K(()=>Q(W(k,"users"),{first:"Ada",last:"Lovelace",born:1815})),t=await t,_(),t);console.log("Document written with ID: ",y.id)}catch(y){console.error("Error adding document: ",y)}return(y,d)=>{const C=R,S=z,O=A;return n(),r("div",null,[g(C,{show:c(f),title:"alertTitle",message:c(s),onOnClose:d[0]||(d[0]=m=>f.value=!1)},null,8,["show","message"]),g(ut,{onOnClose:d[1]||(d[1]=m=>a.value=!1),"is-open":c(a),"selected-data":c(l)},null,8,["is-open","selected-data"]),g(Me,{onOnSuccess:d[2]||(d[2]=m=>{s.value=m,f.value=!0}),onOnClose:d[3]||(d[3]=m=>p.value=!1),"is-open":c(p)},null,8,["is-open"]),g(vt,{onOnSuccess:d[4]||(d[4]=m=>{s.value=m,f.value=!0}),onOnClose:d[5]||(d[5]=m=>o.value=!1),"is-open":c(o),"selected-data":c(l)},null,8,["is-open","selected-data"]),e("button",{onClick:d[6]||(d[6]=m=>p.value=!0),class:"py-2 p-4 shadow-xl btn-primary my-4 text-white"},[$t,u(" Ajouter nouveau")]),e("div",xt,[c(b).users&&c(b).users.length!=0?(n(),X(S,{key:0},{default:j(()=>[wt,e("tbody",kt,[(n(!0),r(T,null,I(c(b).users,(m,N)=>(n(),r("tr",{key:N},[e("td",Dt,i(m.attributes.last_name+" "+m.attributes.first_name),1),e("td",Ct,i(m.attributes.email),1),e("td",St,[m.attributes.is_agent==!0?(n(),r("i",Ot)):(n(),r("i",Nt))]),e("td",Mt,[e("a",{class:"p-0.5 px-2 text-white bg-yellow-500 hover:bg-yellow-600 shadow-xl rounded-sm",onClick:M=>h(m,"read")},jt,8,Ut),e("a",{class:"p-0.5 px-2 text-white bg-blue-500 hover:bg-blue-600 shadow-xl rounded-sm",onClick:d[7]||(d[7]=()=>{})},At),e("a",{class:"p-0.5 px-2 text-white bg-red-500 hover:bg-red-600 shadow-xl rounded-sm",onClick:M=>h(m,"delete")},Pt,8,Et)])]))),128))])]),_:1})):(n(),r("div",Bt,[Tt,g(O,{class:"h-12"})]))])])}}});export{Jt as default};
