import{_ as N,a as T}from"./Modal.b73f5a06.js";import{_ as U}from"./Datatable.vue.ca3ea79b.js";import{_ as k}from"./Spinner.d3bd0c23.js";import{u as S}from"./categoriesStore.5ad58280.js";import{n as F,r as _,o as a,c as i,b as f,w as O,a as e,u as t,q as V,F as D,s as j,t as y,v as q,x as B,y as $,z as w,d as v,g as z,A as L,B as M}from"./entry.8274f21e.js";import{_ as I,a as R}from"./DeleteCategoryModal.vue.6eb0e46d.js";import"./FirestoreService.ba9c0b5d.js";const G={class:"modal-content text-left"},H={class:"flex p-4 bg-blue-400 text-white justify-between pb-3"},J=e("h3",{class:"text-xl"},[e("i",{class:"fa-solid fa-circle-plus"}),v(" Ajouter une catégorie ")],-1),K=e("i",{class:"fa-solid fa-xmark"},null,-1),Q=[K],W={key:0,class:"flex bg-white h-64 w-full justify-center items-center"},X={key:1},Y=["onSubmit"],Z={style:{height:"30vh"},class:"modal-body pb-16 p-5 overflow-y-auto"},ee={key:0,class:"bg-red-200 border-l-4 border-red-500 p-4 mb-4"},se=e("div",null,null,-1),te={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},oe={class:"mb-4"},le=e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"name"},"Nom :",-1),ne={class:"mb-4"},ae=e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"slug"},"Slug :",-1),ie={class:"absolute bg-gray-100 w-full flex justify-end bottom-0 p-4"},de=e("i",{class:"fa-solid fa-close"},null,-1),re=e("button",{type:"submit",class:"btn-primary text-white py-2 px-4 rounded-sm"},[e("i",{class:"fa-solid fa-save"}),v(" Enregistrer ")],-1),ce=F({__name:"AddCategoryModal",props:{isOpen:{type:Boolean,required:!0,default:!1}},emits:["onClose","onSuccess"],setup(x,{emit:g}){const d=S(),p=_(!1),l=_({name:"",slug:""});_("");function c(){console.log("===================================="),console.log(),console.log("===================================="),l.value.slug=l.value.name.trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}const b=async()=>{p.value=!0,await d.postData(l.value).then(u=>{u&&(g("onClose"),g("onSuccess","Catégorie ajoutée avec succès"),l.value.name="",l.value.slug=""),p.value=!1}),setTimeout(()=>{p.value=!1},15e3)};return(u,o)=>{const r=k,h=N;return a(),i("div",null,[f(h,{"is-open":x.isOpen},{default:O(()=>[e("div",G,[e("div",H,[J,e("button",{onClick:o[0]||(o[0]=s=>u.$emit("onClose")),class:"modal-close"},Q)]),t(p)?(a(),i("div",W,[f(r,{class:"h-12"})])):(a(),i("div",X,[e("form",{onSubmit:V(b,["prevent"])},[e("div",Z,[t(d).errors&&t(d).errors.length!=0?(a(),i("div",ee,[(a(!0),i(D,null,j(t(d).errors,(s,m)=>(a(),i("p",{key:m,class:"font-semibold my-1"},y(("getFieldFromPointer"in u?u.getFieldFromPointer:t(q))(s.source.pointer))+" : "+y(s.detail),1))),128))])):B("",!0),se,e("div",te,[e("div",oe,[le,$(e("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>t(l).name=s),onInput:c,class:"border rounded-md py-2 px-3 w-full",type:"text",id:"name",name:"name",placeholder:"Nom de la catégorie",required:""},null,544),[[w,t(l).name]])]),e("div",ne,[ae,$(e("input",{"onUpdate:modelValue":o[2]||(o[2]=s=>t(l).slug=s),class:"border rounded-md py-2 px-3 w-full",type:"text",id:"slug",name:"slug",placeholder:"Slug de la catégorie",readonly:"",required:""},null,512),[[w,t(l).slug]])])])]),e("div",ie,[e("a",{class:"bg-gray-200 text-black py-2 px-4 rounded-sm mr-2",onClick:o[3]||(o[3]=s=>u.$emit("onClose"))},[de,v(" Fermer ")]),re])],40,Y)]))])]),_:1},8,["is-open"])])}}}),ue={class:"modal-content text-left"},pe={class:"flex p-4 bg-blue-400 text-white justify-between pb-3"},me=e("h3",{class:"text-xl"},[e("i",{class:"fa-solid fa-circle-plus"}),v(" Editer une catégorie ")],-1),_e=e("i",{class:"fa-solid fa-xmark"},null,-1),fe=[_e],ge={key:0,class:"flex bg-white h-64 w-full justify-center items-center"},be={key:1},ve=["onSubmit"],he={style:{height:"30vh"},class:"modal-body pb-16 p-5 overflow-y-auto"},ye={key:0,class:"bg-red-200 border-l-4 border-red-500 p-4 mb-4"},xe=e("div",null,null,-1),$e={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},we={class:"mb-4"},Ce=e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"name"},"Nom :",-1),ke={class:"mb-4"},Se=e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"slug"},"Slug :",-1),Fe={class:"absolute bg-gray-100 w-full flex justify-end bottom-0 p-4"},Oe=e("i",{class:"fa-solid fa-close"},null,-1),De=e("button",{type:"submit",class:"btn-primary text-white py-2 px-4 rounded-sm"},[e("i",{class:"fa-solid fa-save"}),v(" Enregistrer ")],-1),je=F({__name:"EditCategoryModal",props:{isOpen:{type:Boolean},selectedData:{}},emits:["onClose","onSuccess"],setup(x,{emit:g}){const d=x,p=S(),l=_(!1),c=_({name:"",slug:""});z(()=>d.isOpen,(o,r)=>{o&&d.selectedData&&(c.value={...d.selectedData})});function b(){console.log("===================================="),console.log(),console.log("===================================="),c.value.slug=c.value.name.trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}const u=async()=>{l.value=!0,d.selectedData&&await p.updateData(c.value,d.selectedData.id).then(o=>{o&&(console.log("=============status======================="),console.log(o),console.log("===================================="),g("onClose"),g("onSuccess","Catégorie mise à jour avec succès")),l.value=!1}),setTimeout(()=>{l.value=!1},15e3)};return(o,r)=>{const h=k,s=N;return a(),i("div",null,[f(s,{"is-open":o.isOpen},{default:O(()=>[e("div",ue,[e("div",pe,[me,e("button",{onClick:r[0]||(r[0]=m=>o.$emit("onClose")),class:"modal-close"},fe)]),t(l)?(a(),i("div",ge,[f(h,{class:"h-12"})])):(a(),i("div",be,[e("form",{onSubmit:V(u,["prevent"])},[e("div",he,[t(p).errors&&t(p).errors.length!=0?(a(),i("div",ye,[(a(!0),i(D,null,j(t(p).errors,(m,C)=>(a(),i("p",{key:C,class:"font-semibold my-1"},y(("getFieldFromPointer"in o?o.getFieldFromPointer:t(q))(m.source.pointer))+" : "+y(m.detail),1))),128))])):B("",!0),xe,e("div",$e,[e("div",we,[Ce,$(e("input",{"onUpdate:modelValue":r[1]||(r[1]=m=>t(c).name=m),onInput:b,class:"border rounded-md py-2 px-3 w-full",type:"text",id:"name",name:"name",placeholder:"Nom de la catégorie",required:""},null,544),[[w,t(c).name]])]),e("div",ke,[Se,$(e("input",{"onUpdate:modelValue":r[2]||(r[2]=m=>t(c).slug=m),class:"border rounded-md py-2 px-3 w-full",type:"text",id:"slug",name:"slug",placeholder:"Slug de la catégorie",readonly:"",required:""},null,512),[[w,t(c).slug]])])])]),e("div",Fe,[e("a",{class:"bg-gray-200 text-black py-2 px-4 rounded-sm mr-2",onClick:r[3]||(r[3]=m=>o.$emit("onClose"))},[Oe,v(" Fermer ")]),De])],40,ve)]))])]),_:1},8,["is-open"])])}}}),Ae=e("i",{class:"fa-solid fa-circle-plus"},null,-1),Me={class:"p-5 bg-white w-full h-full shadow-2xl rounded-lg bg-opacity-25"},Ne=e("thead",null,[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-sm font-bold"},"Nom"),e("th",{class:"px-6 py-3 text-left text-sm font-bold"},"Slug"),e("th",{class:"px-6 py-3 text-left text-sm font-bold"},"Actions")])],-1),Ve={class:"bg-white text-gray-600 divide-y divide-gray-200"},qe=["title"],Be={class:"px-6 py-4 whitespace-no-wrap"},Ee={class:"px-6 py-4 whitespace-no-wrap"},Pe={class:"flex gap-2"},Te=["onClick"],Ue=e("i",{class:"fa-regular fa-eye"},null,-1),ze=[Ue],Le=["onClick"],Ie=e("i",{class:"fa-regular fa-pen-to-square"},null,-1),Re=[Ie],Ge=["onClick"],He=e("i",{class:"fa-regular fa-trash-can"},null,-1),Je=[He],Ke={key:1,class:"flex flex-col justify-center items-center"},Qe=e("p",{class:"m-2"},"Chargement en cours...",-1),os=F({__name:"categories",setup(x){const g=S(),d=_(),p=_(!1),l=_(!1),c=_(!1),b=_(!1),u=_(!1),o=_(""),r=(h,s)=>{switch(d.value=h,s){case"read":l.value=!0;break;case"edit":b.value=!0;break;case"delete":c.value=!0;break}console.log("===================================="),console.log(l.value),console.log("====================================")};return(h,s)=>{const m=T,C=U,E=k;return a(),i("div",null,[f(m,{show:t(u),title:"alertTitle",message:t(o),onOnClose:s[0]||(s[0]=n=>u.value=!1)},null,8,["show","message"]),f(ce,{onOnSuccess:s[1]||(s[1]=n=>{o.value=n,u.value=!0}),onOnClose:s[2]||(s[2]=n=>p.value=!1),"is-open":t(p)},null,8,["is-open"]),f(I,{onOnClose:s[3]||(s[3]=n=>l.value=!1),"is-open":t(l),"selected-data":t(d)},null,8,["is-open","selected-data"]),f(je,{onOnSuccess:s[4]||(s[4]=n=>{o.value=n,u.value=!0}),onOnClose:s[5]||(s[5]=n=>b.value=!1),"is-open":t(b),"selected-data":t(d)},null,8,["is-open","selected-data"]),f(R,{onOnSuccess:s[6]||(s[6]=n=>{o.value=n,u.value=!0}),onOnClose:s[7]||(s[7]=n=>c.value=!1),"is-open":t(c),"selected-data":t(d)},null,8,["is-open","selected-data"]),e("button",{onClick:s[8]||(s[8]=n=>p.value=!0),class:"py-2 p-4 shadow-xl btn-primary my-4 text-white"},[Ae,v(" Ajouter nouveau")]),e("div",Me,[t(g).loading?(a(),i("div",Ke,[Qe,f(E,{class:"h-12"})])):(a(),L(C,{key:0},{default:O(()=>[Ne,e("tbody",Ve,[(a(!0),i(D,null,j(t(g).categories,(n,P)=>(a(),i("tr",{key:P,title:`Créé le ${t(M)(n.createdAt)}
Modifié le ${t(M)(n.updatedAt)}}`},[e("td",Be,y(n.name),1),e("td",Ee,y(n.slug),1),e("td",Pe,[e("a",{class:"p-0.5 px-2 text-white bg-yellow-500 hover:bg-yellow-600 shadow-xl rounded-sm",onClick:A=>r(n,"read")},ze,8,Te),e("a",{class:"p-0.5 px-2 text-white bg-blue-500 hover:bg-blue-600 shadow-xl rounded-sm",onClick:A=>r(n,"edit")},Re,8,Le),e("a",{class:"p-0.5 px-2 text-white bg-red-500 hover:bg-red-600 shadow-xl rounded-sm",onClick:A=>r(n,"delete")},Je,8,Ge)])],8,qe))),128))])]),_:1}))])])}}});export{os as default};
