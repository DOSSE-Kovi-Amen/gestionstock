import{_ as C,a as E}from"./Modal.b73f5a06.js";import{_ as U}from"./Datatable.vue.ca3ea79b.js";import{_ as S}from"./Spinner.d3bd0c23.js";import{u as O}from"./spendsStore.b3cd664d.js";import{n as w,r as v,o as p,c as _,b as h,w as k,a as e,u as t,q as M,F as j,s as V,t as y,v as N,x as P,y as x,z as g,d as m,B as D,g as z,A as I}from"./entry.8274f21e.js";import"./FirestoreService.ba9c0b5d.js";const L={class:"modal-content text-left"},R={class:"flex p-4 bg-blue-400 text-white justify-between pb-3"},G=e("h3",{class:"text-xl"},[e("i",{class:"fa-solid fa-circle-plus"}),m(" Ajouter une dépense ")],-1),H=e("i",{class:"fa-solid fa-xmark"},null,-1),J=[H],K={key:0,class:"flex bg-white h-64 w-full justify-center items-center"},Q={key:1},W=["onSubmit"],X={style:{height:"60vh"},class:"modal-body pb-16 p-5 overflow-y-auto"},Y={key:0,class:"bg-red-200 border-l-4 border-red-500 p-4 mb-4"},Z=e("div",null,null,-1),ee={class:"mb-4"},te=e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"name"},"Titre :",-1),se={class:"mb-4"},oe=e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"name"},"Montant :",-1),le={class:"mb-4"},ne=e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"slug"},"Description :",-1),ae={class:"absolute bg-gray-100 w-full flex justify-end bottom-0 p-4"},ie=e("i",{class:"fa-solid fa-close"},null,-1),de=e("button",{type:"submit",class:"btn-primary text-white py-2 px-4 rounded-sm"},[e("i",{class:"fa-solid fa-save"}),m(" Enregistrer ")],-1),re=w({__name:"AddSpendModal",props:{isOpen:{type:Boolean,required:!0,default:!1}},emits:["onClose","onSuccess"],setup($,{emit:l}){const i=O(),f=v(!1),n=v({title:"",amount:null,description:""}),a=async()=>{f.value=!0,await i.postData(n.value).then(d=>{d&&(l("onClose"),l("onSuccess","Dépense ajoutée avec succès"),n.value.title="",n.value.amount=null,n.value.description=""),f.value=!1}),setTimeout(()=>{f.value=!1},15e3)};return(d,o)=>{const r=S,b=C;return p(),_("div",null,[h(b,{"is-open":$.isOpen},{default:k(()=>[e("div",L,[e("div",R,[G,e("button",{onClick:o[0]||(o[0]=c=>d.$emit("onClose")),class:"modal-close"},J)]),t(f)?(p(),_("div",K,[h(r,{class:"h-12"})])):(p(),_("div",Q,[e("form",{onSubmit:M(a,["prevent"])},[e("div",X,[t(i).errors&&t(i).errors.length!=0?(p(),_("div",Y,[(p(!0),_(j,null,V(t(i).errors,(c,s)=>(p(),_("p",{key:s,class:"font-semibold my-1"},y(("getFieldFromPointer"in d?d.getFieldFromPointer:t(N))(c.source.pointer))+" : "+y(c.detail),1))),128))])):P("",!0),Z,e("div",ee,[te,x(e("input",{"onUpdate:modelValue":o[1]||(o[1]=c=>t(n).title=c),class:"border rounded-md py-2 px-3 w-full",type:"text",id:"title",name:"title",placeholder:"Titre",required:""},null,512),[[g,t(n).title]])]),e("div",se,[oe,x(e("input",{"onUpdate:modelValue":o[2]||(o[2]=c=>t(n).amount=c),class:"border rounded-md py-2 px-3 w-full",type:"number",id:"amount",name:"amount",placeholder:"Montant",required:""},null,512),[[g,t(n).amount]])]),e("div",le,[ne,x(e("textarea",{"onUpdate:modelValue":o[3]||(o[3]=c=>t(n).description=c),id:"description",name:"description",class:"w-full border rounded py-2 px-3 text-gray-700 focus:outline-none focus:border-blue-500",required:"",placeholder:"Description"},null,512),[[g,t(n).description]])])]),e("div",ae,[e("a",{class:"bg-gray-200 text-black py-2 px-4 rounded-sm mr-2",onClick:o[4]||(o[4]=c=>d.$emit("onClose"))},[ie,m(" Fermer ")]),de])],40,W)]))])]),_:1},8,["is-open"])])}}}),ce={class:"modal-content text-left"},ue={class:"flex p-4 bg-yellow-500 text-white justify-between pb-3"},pe=e("h3",{class:"text-xl"},[e("i",{class:"fa-regular fa-eye"}),m(" Voir une dépense")],-1),me=e("i",{class:"fa-solid fa-xmark"},null,-1),_e=[me],fe={style:{height:"80vh"},class:"modal-body pb-16 p-5 overflow-y-auto"},be=e("strong",null,"ID:",-1),he=e("strong",null,"Titre:",-1),ve=e("strong",null,"Montant:",-1),ye=e("strong",null,"Description:",-1),$e=e("strong",null,"Date de création:",-1),xe=e("strong",null,"Date de modification:",-1),ge={class:"absolute bg-gray-100 w-full flex justify-end bottom-0 p-4"},we=e("i",{class:"fa-solid fa-close"},null,-1),ke=w({__name:"ViewSpendModal",props:{isOpen:{type:Boolean},selectedData:{}},setup($){return(l,i)=>{const f=C;return p(),_("div",null,[h(f,{"is-open":l.isOpen},{default:k(()=>{var n,a,d,o,r,b;return[e("div",ce,[e("div",ue,[pe,e("button",{onClick:i[0]||(i[0]=c=>l.$emit("onClose")),class:"modal-close"},_e)]),e("div",fe,[e("li",null,[be,m(" "+y((n=l.selectedData)==null?void 0:n.id),1)]),e("li",null,[he,m(" "+y((a=l.selectedData)==null?void 0:a.title),1)]),e("li",null,[ve,m(" "+y((d=l.selectedData)==null?void 0:d.amount),1)]),e("li",null,[ye,m(" "+y((o=l.selectedData)==null?void 0:o.description),1)]),e("li",null,[$e,m(" "+y(("formatDateFrench"in l?l.formatDateFrench:t(D))((r=l.selectedData)==null?void 0:r.createdAt)),1)]),e("li",null,[xe,m(" "+y(("formatDateFrench"in l?l.formatDateFrench:t(D))((b=l.selectedData)==null?void 0:b.updatedAt)),1)])]),e("div",ge,[e("button",{class:"bg-gray-200 text-black py-1 px-4 rounded-sm mr-2",onClick:i[1]||(i[1]=c=>l.$emit("onClose"))},[we,m(" Fermer ")])])])]}),_:1},8,["is-open"])])}}}),De={class:"modal-content text-left"},Ce={class:"flex p-4 bg-blue-400 text-white justify-between pb-3"},Se=e("h3",{class:"text-xl"},[e("i",{class:"fa-solid fa-circle-plus"}),m(" Editer une catégorie ")],-1),Oe=e("i",{class:"fa-solid fa-xmark"},null,-1),Fe=[Oe],Me={key:0,class:"flex bg-white h-64 w-full justify-center items-center"},je={key:1},Ve=["onSubmit"],Ae={style:{height:"60vh"},class:"modal-body pb-16 p-5 overflow-y-auto"},Te={class:"mb-4"},qe=e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"name"},"Titre :",-1),Be={class:"mb-4"},Ee=e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"name"},"Montant :",-1),Ue={class:"mb-4"},Ne=e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"slug"},"Description :",-1),Pe={class:"absolute bg-gray-100 w-full flex justify-end bottom-0 p-4"},ze=e("i",{class:"fa-solid fa-close"},null,-1),Ie=e("button",{type:"submit",class:"btn-primary text-white py-2 px-4 rounded-sm"},[e("i",{class:"fa-solid fa-save"}),m(" Enregistrer ")],-1),Le=w({__name:"EditSpendModal",props:{isOpen:{type:Boolean},selectedData:{}},emits:["onClose","onSuccess"],setup($,{emit:l}){const i=$,f=O(),n=v(!1),a=v({title:"",amount:0,description:""});z(()=>i.isOpen,()=>{i.selectedData&&(a.value={...i.selectedData})});const d=async()=>{n.value=!0,i.selectedData&&await f.updateData(a.value,i.selectedData.id).then(o=>{o&&(console.log("=============status======================="),console.log(o),console.log("===================================="),l("onClose"),l("onSuccess","Dépense mise à jour avec succès")),n.value=!1}),setTimeout(()=>{n.value=!1},15e3)};return(o,r)=>{const b=S,c=C;return p(),_("div",null,[h(c,{"is-open":o.isOpen},{default:k(()=>[e("div",De,[e("div",Ce,[Se,e("button",{onClick:r[0]||(r[0]=s=>o.$emit("onClose")),class:"modal-close"},Fe)]),t(n)?(p(),_("div",Me,[h(b,{class:"h-12"})])):(p(),_("div",je,[e("form",{onSubmit:M(d,["prevent"])},[e("div",Ae,[e("div",Te,[qe,x(e("input",{"onUpdate:modelValue":r[1]||(r[1]=s=>t(a).title=s),class:"border rounded-md py-2 px-3 w-full",type:"text",id:"title",name:"title",placeholder:"Titre",required:""},null,512),[[g,t(a).title]])]),e("div",Be,[Ee,x(e("input",{"onUpdate:modelValue":r[2]||(r[2]=s=>t(a).amount=s),class:"border rounded-md py-2 px-3 w-full",type:"number",id:"amount",name:"amount",placeholder:"Montant",required:""},null,512),[[g,t(a).amount]])]),e("div",Ue,[Ne,x(e("textarea",{"onUpdate:modelValue":r[3]||(r[3]=s=>t(a).description=s),id:"description",name:"description",class:"w-full border rounded py-2 px-3 text-gray-700 focus:outline-none focus:border-blue-500",required:"",placeholder:"Description"},null,512),[[g,t(a).description]])])]),e("div",Pe,[e("a",{class:"bg-gray-200 text-black py-2 px-4 rounded-sm mr-2",onClick:r[4]||(r[4]=s=>o.$emit("onClose"))},[ze,m(" Fermer ")]),Ie])],40,Ve)]))])]),_:1},8,["is-open"])])}}}),Re={class:"modal-content text-left h-56"},Ge={class:"flex p-4 bg-red-500 text-white justify-between pb-3"},He=e("h3",{class:"text-xl"},"Confirmer la suppression",-1),Je=e("i",{class:"fa-solid fa-xmark"},null,-1),Ke=[Je],Qe={key:0,class:"flex bg-white h-full w-full justify-center items-center"},We={key:1},Xe={class:"modal-body p-5"},Ye={class:"absolute bg-gray-100 w-full flex justify-end bottom-0 p-4"},Ze=e("i",{class:"fa-solid fa-close"},null,-1),et=e("i",{class:"fa-solid fa-trash"},null,-1),tt=w({__name:"DeleteSpendModal",props:{isOpen:{type:Boolean},selectedData:{}},emits:["onClose","onSuccess"],setup($,{emit:l}){const i=v(!1),f=O(),n=async a=>{i.value=!0,f.deleteData(a).then(()=>{i.value=!1,l("onClose"),l("onSuccess","Dépense supprimée avec succès")})};return(a,d)=>{const o=S,r=C;return p(),_("div",null,[h(r,{"is-open":a.isOpen},{default:k(()=>{var b;return[e("div",Re,[e("div",Ge,[He,e("button",{onClick:d[0]||(d[0]=c=>a.$emit("onClose")),class:"modal-close"},Ke)]),t(i)?(p(),_("div",Qe,[h(o,{class:"h-12"})])):(p(),_("div",We,[e("div",Xe,[e("p",null,y(`Supprimer ${(b=a.selectedData)==null?void 0:b.title} ?`),1)]),e("div",Ye,[e("button",{class:"bg-gray-200 text-black py-1 px-4 rounded-sm mr-2",onClick:d[1]||(d[1]=c=>a.$emit("onClose"))},[Ze,m(" Fermer ")]),e("button",{onClick:d[2]||(d[2]=c=>{var s;return n(((s=a.selectedData)==null?void 0:s.id)??"")}),class:"btn-primary text-white py-1 px-4 rounded-sm"},[et,m(" Supprimer ")])])]))])]}),_:1},8,["is-open"])])}}}),st=e("i",{class:"fa-solid fa-circle-plus"},null,-1),ot={class:"p-5 bg-white w-full h-full shadow-2xl rounded-lg bg-opacity-25"},lt=e("thead",null,[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-sm font-bold"},"Titre"),e("th",{class:"px-6 py-3 text-left text-sm font-bold"},"Montant"),e("th",{class:"px-6 py-3 text-left text-sm font-bold"},"Description"),e("th",{class:"px-6 py-3 text-left text-sm font-bold"},"Actions")])],-1),nt={class:"bg-white text-gray-600 divide-y divide-gray-200"},at=["title"],it={class:"px-6 py-4 whitespace-no-wrap"},dt={class:"px-6 py-4 whitespace-no-wrap"},rt={class:"px-6 py-4 whitespace-no-wrap"},ct={class:"flex gap-2"},ut=["onClick"],pt=e("i",{class:"fa-regular fa-eye"},null,-1),mt=[pt],_t=["onClick"],ft=e("i",{class:"fa-regular fa-pen-to-square"},null,-1),bt=[ft],ht=["onClick"],vt=e("i",{class:"fa-regular fa-trash-can"},null,-1),yt=[vt],$t={key:1,class:"flex flex-col justify-center items-center"},xt=e("p",{class:"m-2"},"Chargement en cours...",-1),Ot=w({__name:"spends",setup($){const l=O(),i=v(),f=v(!1),n=v(!1),a=v(!1),d=v(!1),o=v(!1),r=v(""),b=(c,s)=>{switch(i.value=c,s){case"read":n.value=!0;break;case"edit":d.value=!0;break;case"delete":a.value=!0;break}console.log("===================================="),console.log(n.value),console.log("====================================")};return(c,s)=>{const A=E,T=U,q=S;return p(),_("div",null,[h(A,{show:t(o),title:"alertTitle",message:t(r),onOnClose:s[0]||(s[0]=u=>o.value=!1)},null,8,["show","message"]),h(re,{onOnSuccess:s[1]||(s[1]=u=>{r.value=u,o.value=!0}),onOnClose:s[2]||(s[2]=u=>f.value=!1),"is-open":t(f)},null,8,["is-open"]),h(ke,{onOnClose:s[3]||(s[3]=u=>n.value=!1),"is-open":t(n),"selected-data":t(i)},null,8,["is-open","selected-data"]),h(Le,{onOnSuccess:s[4]||(s[4]=u=>{r.value=u,o.value=!0}),onOnClose:s[5]||(s[5]=u=>d.value=!1),"is-open":t(d),"selected-data":t(i)},null,8,["is-open","selected-data"]),h(tt,{onOnSuccess:s[6]||(s[6]=u=>{r.value=u,o.value=!0}),onOnClose:s[7]||(s[7]=u=>a.value=!1),"is-open":t(a),"selected-data":t(i)},null,8,["is-open","selected-data"]),e("button",{onClick:s[8]||(s[8]=u=>f.value=!0),class:"py-2 p-4 shadow-xl btn-primary my-4 text-white"},[st,m(" Ajouter nouveau")]),e("div",ot,[t(l).loading?(p(),_("div",$t,[xt,h(q,{class:"h-12"})])):(p(),I(T,{key:0},{default:k(()=>[lt,e("tbody",nt,[(p(!0),_(j,null,V(t(l).spends,(u,B)=>(p(),_("tr",{key:B,title:`Créé le ${t(D)(u.createdAt)}
Modifié le ${t(D)(u.updatedAt)}}`},[e("td",it,y(u.title),1),e("td",dt,y(u.amount),1),e("td",rt,y(u.description),1),e("td",ct,[e("a",{class:"p-0.5 px-2 text-white bg-yellow-500 hover:bg-yellow-600 shadow-xl rounded-sm",onClick:F=>b(u,"read")},mt,8,ut),e("a",{class:"p-0.5 px-2 text-white bg-blue-500 hover:bg-blue-600 shadow-xl rounded-sm",onClick:F=>b(u,"edit")},bt,8,_t),e("a",{class:"p-0.5 px-2 text-white bg-red-500 hover:bg-red-600 shadow-xl rounded-sm",onClick:F=>b(u,"delete")},yt,8,ht)])],8,at))),128))])]),_:1}))])])}}});export{Ot as default};
